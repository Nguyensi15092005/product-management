extends ../../layout/default.pug


block main
  .section-products-featured.my-5
    .container.my-3
      include ../../partials/list-btn-user.pug
      .row 
        .col-12 
          .chat(my-id=user.id)
            .inner-body 
              each chat in chats 
                div(class=(chat.user_id == user.id ? "inner-outgoing": "inner-incoming"))
                  if(chat.user_id != user.id)
                    .inner-name #{chat.inforUser.fullName} 
                  if(chat.content)
                    .inner-content  
                      | #{chat.content}
                  if(chat.images.length > 0)
                    .inner-images
                      each image in chat.images
                        img(src=image) 
                  
              div(class="inner-list-typing")
            .inner-upload-image   
              form(action="")
                input(type="file" name="image" style="display:'none';" multiple accept="image/*" id="upload-image")
                div(class="inner-image")

              

            .inner-foot
              form(
                action=""
                class="inner-form"
              ) 
                input(
                  type="text"
                  placeholder="Nhập nội dung..."
                  name="content"
                )

                label(for="upload-image" onclick="document.querySelector('.inner-image').style.display='flex'")
                  <i class="fa-regular fa-image btn btn-light"></i> 
                
                i(class="fa-regular fa-face-smile btn btn-light button-icon")
                button(
                  type="submit"
                )
                  i.fa-regular.fa-paper-plane 
  div(class="tooltip" role="tooltip")
    emoji-picker(class="light")
block script 
  script(type="module" src="/js/chat.js")


