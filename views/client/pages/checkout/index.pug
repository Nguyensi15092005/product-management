extends ../../layout/default.pug
include ../../mixins/box-head.pug
include ../../mixins/alert.pug


block main 

  +alert-success(2000)
  .container
    .row 
      .col-12 
        +box-head("Đặt hàng")
    
      .col-12
        table(class="table table-hover")
          thead 
            tr 
              th STT 
              th Ảnh
              th Tên
              th Giá 
              th Số lượng
              th tổng tiền
          tbody 
            if(cartDetail.products.length > 0)
              each item, index in cartDetail.products 
                tr 
                  td #{index +1}
                  td 
                    img(src=item.productInfo.thumbnail, alt=item.productInfo.title width="80px")
                  td #{item.productInfo.title}
                  td #{item.productInfo.priceNew.toLocaleString('vi-VN', { style: 'currency', currency: 'VND' })}
                  td #{item.quantity} 
                  td #{item.totalPrice.toLocaleString('vi-VN', { style: 'currency', currency: 'VND' })}
            else 
              tr 
              td(colspan="7" class="text-center") KHông có sản phẩm nào 
        if(cartDetail.products.length > 0)
          h4(class="text-right") Tổng đơn hàng: #{cartDetail.totalPrice.toLocaleString('vi-VN', { style: 'currency', currency: 'VND' })}

    if(cartDetail.products.length > 0)
      .row 
        .col-12 
          .card.p-4.my-4 
            form(
              action="/payment/create"
              method="POST"
            ) 
              div(class="form-group")
                lable(for="fullname") Họ và tên
                input(
                  type="text"
                  name="fullname"
                  id="fullname"
                  placeholder="fullname"
                  class="form-control"
                  required
                )
              div(class="form-group")
                lable(for="phone") Số điện thoại
                input(
                  type="text"
                  name="phone"
                  id="phone"
                  placeholder="phone"
                  class="form-control"
                  required
                )
              div(class="form-group")
                lable(for="address") Địa chỉ
                input(
                  type="text"
                  name="address"
                  id="address"
                  placeholder="address"
                  class="form-control"
                  required
                )
              div(class="form-group")
                button(
                  type="submit"
                  class="btn btn-success form-control"
                ) Đặt hàng

    

      script(src="/js/cart.js")
      


